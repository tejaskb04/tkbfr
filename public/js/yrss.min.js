/* YRSS 1.1.2 */
/* Copyright (c) 2017 Mark Hillard - MIT License */

!function(a){"use strict";a.fn.yrss=function(c,d,e){var f={ssl:!1,limit:10,reverse:!1,cache:!0,maxage:3600,showerror:!0,errormsg:"",tags:!1,date:!0,dateformat:"default",titletag:"h4",content:!0,image:!1,snippet:!0,snippetlimit:120,linktarget:"_self"};return d=a.extend(f,d),this.each(function(f,g){var h="";if(d.ssl&&(h="s"),a(g).hasClass("rss-feed")||a(g).addClass("rss-feed"),null===c)return!1;var i="http"+h+"://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from feed where url="'+c+'"');null!==d.limit&&(i+=" limit "+d.limit),d.reverse&&(i+=" | reverse()"),d.cache&&(i+="&_maxage="+d.maxage),i+="&format=json",a.getJSON(i,function(c,f,h){if("success"===f)b(g,c,d),a.isFunction(e)&&e.call(this,a(g));else if("error"===f||"parsererror"===f){if(!d.showerror)return!1;var i;i=""!==d.errormsg?d.errormsg:h,a(g).html('<div class="rss-error"><p>'+i+"</p></div>")}})})};var b=function(b,c,d){var e=c.query.results.item;if(a.isArray(e)||(e=[e]),!e)return!1;var g,f="";a.each(e,function(b){var g,c=e[b];void 0!==c.category&&(g=c.category.toString().toLowerCase().replace(/ /g,"-").replace(/,/g," "));var h;if(c.pubDate){var i=new Date(c.pubDate);if("default"===d.dateformat)h=(i.getMonth()+1).toString()+"/"+i.getDate().toString()+"/"+i.getFullYear();else if("spellmonth"===d.dateformat){var j=["January","February","March","April","May","June","July","August","September","October","November","December"];h=j[i.getMonth()]+" "+i.getDate().toString()+", "+i.getFullYear()}else"localedate"===d.dateformat?h=i.toLocaleDateString():"localedatetime"===d.dateformat&&(h=i.toLocaleDateString()+" "+i.toLocaleTimeString())}if(f+='<div class="entry-wrapper"',d.tags&&void 0!==c.category&&(f+='data-tag="'+g+'"'),f+='><div class="entry-title"><'+d.titletag+'><a href="'+c.link+'">'+c.title+"</a></"+d.titletag+"></div>",d.date&&h&&(f+='<div class="entry-date">'+h+"</div>"),d.content){var k;k=void 0!==c.description?a.trim(c.description):a.trim(c.encoded),f+='<div class="entry-content">'+k+"</div>"}f+="</div>"}),g=a(f),d.content&&a.each(g,function(){if(d.image){var b=a(this).find("img").first();0!==b.length&&(a(this).prepend('<div class="entry-image">'),a(this).find(".entry-image").append(b).nextAll().wrapAll('<div class="entry-text"></div>'))}if(d.snippet){var c=a(this).find(".entry-content"),e=a(c).text().length;c.text(function(a,b){return 0===e?"":0!==e&&e<=d.snippetlimit?b:b.substring(0,d.snippetlimit)+" ..."})}}),a(b).append(g),a("a",b).attr("target",d.linktarget)}}(jQuery);
